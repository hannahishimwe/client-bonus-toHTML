<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
    <script>
        $(document).ready(()=>{
            $("button").click(()=>{
                $.getJSON("https://nms.kcl.ac.uk/leonardo.magela/api/5CCS2INS/customers/1973-05-28", (data)=>{
                    var tableBody = $("#json-table");
                    for (let i = 0; i < data.length; i++) {
                        const client = data[i];
                        var tableRow = $("<tr>");
                        $.each(client, (key,value)=>{
                            var tableDataCell = $("<td>").text(value);
                            if (key == "bonus") {
                                if (!isNaN(value)) {
                                tableDataCell.text(parseFloat(value).toFixed(2));
                                }
                            }
                            tableRow.append(tableDataCell);
                        });
                        tableBody.append(tableRow);
                    }

                });
            })
        });
    </script>
    <title>Hannah Ishimwe - INS CW 2</title>
</head>
<body>
    <div id="json-container">
    <button>Load JSON</button>
    <table id="json-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Bonus (Â£)</th>
                <th>Date of Birth</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </div>
</body>
</html>

<!-- data is returned as an array of json objects 
iterate through each object
create a table data cell
append each data cell to table row for object
each row will be appended to the tbody
which will be returned when the button is pressed-->